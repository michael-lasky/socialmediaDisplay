<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="dgxClip" content="NEWS_BG">
  <title>
    FSPOST
  </title>
    <style>
    <style>
    body, html {
      margin: 0;
      width: 1280px;
      height: 720px;
      overflow: hidden;
    }

    @font-face {
      font-family : Gotham-Black;
      src: url(assets/GothamNarrow-Black.ttf);
    }

    @font-face {
      font-family : Gotham-Bold;
      src: url(assets/GothamNarrow-Bold.ttf);
    }

    @font-face {
      font-family : Gotham;
      src: url(assets/GothamNarrow-Book.ttf);
    }

    @font-face {
      font-family : Gotham-Medium;
      src: url(assets/GothamNarrow-Medium.ttf);
    }

    #username {
      position: absolute;
      min-width: 70px;
      left: 114px;
      top: 19px;
      height: auto;
      margin: 0;
      text-align: left;
      font: 33px Gotham-Medium;
      color: #3d3e3f;
      background-image: url(assets/%POST_1[src].png), linear-gradient(to top right, #f0f0f0, #f0f0f0);
      background-repeat: no-repeat, no-repeat;
      background-position: 5px 5px, top;
      background-size: 33px 33px, 100%;
      padding-top: 5px;
      padding-bottom: 0px;
      padding-left: 5px;
      padding-right: 10px;
      border-bottom-style: solid;
      border-bottom-width: 5px;
      border-bottom-color: #be1c1c;
      z-index: 19;
    }

    #post{
      position: absolute;
      bottom: 200px;
      left: 114px;
      width: 1052px;
      height: 200px;
      margin: 0 auto;
    }

    #postbox{
      position: fixed;
      background-color: #f0f0f0;
      border-bottom-style: solid;
      border-bottom-width: 10px;
      border-bottom-color: #be1c1c;
      opacity: 0.9;
      z-index: 13;
    }

    #postbox span {
      font-family: Gotham-Bold;
      margin: 0 auto;
      padding-top: 3px;
      padding-bottom: 4px;
      padding-left: 10px;
      padding-right: 10px;
      font-weight: bold;
      font-size: 45px;
      text-align: center;
      color: #3d3e3f;
      display: flex;
      flex-direction: column-reverse;
      white-space: pre-wrap;
      word-break: break-word;
    }

    .imagePost {
        text-indent: 0px;
    }

    .noImagePost{
        text-indent: 42px;
    }

    #image {
      position: absolute;
      width: 1280px;
      height: 620px;
      left: 0;
      top: 0;
      object-fit: contain;
      z-index: 2
    }

    #previewBg {
      position: absolute;
      width: 1280px;
      height: 720px;
      left: 0;
      top: 0;
      z-index: 1;
    }

    div:empty {
      display: none;
    }

    </style>
    <script src="assets/jquery-2.2.3.min.js"></script>
    <script src="assets/jquery.textfill.min.js"></script>
  </head>
  <body>
    <div id="username">%POST_1[user_name]</div>
    <div id="post">
        <div id="postbox" style="width:1052px; max-height:150px;bottom: 100px;">
            <span>%POST_1[text]</span>
        </div>
    </div>
    <img id="image" src="%POST_1[imageUrl]"/>
    <img id="previewBg" src="assets/previewBg.png"/>

    <script>
      window.onload = function() {
        //make the text firt in the container.
        	$('#postbox').textfill({
      		    maxFontPixels: 45
          });

          //if the image is from an uploaded image, don't indent the username to show the image logo. If there is a social logo, show it though. Need class above.
          var img = document.getElementById('username');
      		style = img.currentStyle || window.getComputedStyle(img, false);
      		sourceUrl = style.backgroundImage.slice(4, -1).replace(/"/g, "");
      		console.log("name: " + sourceUrl);

      		if (sourceUrl.includes('assets/Images.png')) {
      			img.classList.add('imagePost');
      		} else {
      			img.classList.add('noImagePost');
      		};

      };
  	</script>
  </body>
</html>
